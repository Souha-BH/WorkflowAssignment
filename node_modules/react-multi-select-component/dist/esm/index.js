var Te=Object.defineProperty,Fe=Object.defineProperties;var Le=Object.getOwnPropertyDescriptors;var ne=Object.getOwnPropertySymbols;var We=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;var se=(e,r,t)=>r in e?Te(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Y=(e,r)=>{for(var t in r||(r={}))We.call(r,t)&&se(e,t,r[t]);if(ne)for(var t of ne(r))Ke.call(r,t)&&se(e,t,r[t]);return e},le=(e,r)=>Fe(e,Le(r));function q(e,{insertAt:r}={}){if(!e||typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&t.firstChild?t.insertBefore(o,t.firstChild):t.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}q(`.rmsc{--rmsc-main: #4285f4;--rmsc-hover: #f1f3f5;--rmsc-selected: #e2e6ea;--rmsc-border: #ccc;--rmsc-gray: #aaa;--rmsc-bg: #fff;--rmsc-p: 10px;--rmsc-radius: 4px;--rmsc-h: 38px}.rmsc *{box-sizing:border-box;transition:all .2s ease}.rmsc .gray{color:var(--rmsc-gray)}.rmsc .dropdown-content{position:absolute;z-index:1;top:100%;width:100%;padding-top:8px}.rmsc .dropdown-content .panel-content{overflow:hidden;border-radius:var(--rmsc-radius);background:var(--rmsc-bg);box-shadow:0 0 0 1px #0000001a,0 4px 11px #0000001a}.rmsc .dropdown-container{position:relative;outline:0;background-color:var(--rmsc-bg);border:1px solid var(--rmsc-border);border-radius:var(--rmsc-radius)}.rmsc .dropdown-container[aria-disabled=true]:focus-within{box-shadow:var(--rmsc-gray) 0 0 0 1px;border-color:var(--rmsc-gray)}.rmsc .dropdown-container:focus-within{box-shadow:var(--rmsc-main) 0 0 0 1px;border-color:var(--rmsc-main)}.rmsc .dropdown-heading{position:relative;padding:0 var(--rmsc-p);display:flex;align-items:center;width:100%;height:var(--rmsc-h);cursor:default;outline:0}.rmsc .dropdown-heading .dropdown-heading-value{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}.rmsc .clear-selected-button{cursor:pointer;background:none;border:0;padding:0;display:flex}.rmsc .options{max-height:260px;overflow-y:auto;margin:0;padding-left:0}.rmsc .options li{list-style:none;margin:0}.rmsc .select-item{box-sizing:border-box;cursor:pointer;display:block;padding:var(--rmsc-p);outline:0}.rmsc .select-item:hover,.rmsc .select-item:focus{background:var(--rmsc-hover)}.rmsc .select-item.selected{background:var(--rmsc-selected)}.rmsc .no-options{padding:var(--rmsc-p);text-align:center;color:var(--rmsc-gray)}.rmsc .search{width:100%;position:relative;border-bottom:1px solid var(--rmsc-border)}.rmsc .search input{background:none;height:var(--rmsc-h);padding:0 var(--rmsc-p);width:100%;outline:0;border:0}.rmsc .search-clear-button{cursor:pointer;position:absolute;top:0;right:0;bottom:0;background:none;border:0;padding:0 calc(var(--rmsc-p) / 2)}.rmsc .search-clear-button [hidden]{display:none}.rmsc .item-renderer{display:flex;align-items:baseline}.rmsc .item-renderer input{margin:0 5px 0 0}.rmsc .item-renderer.disabled{opacity:.5}.rmsc .spinner{animation:rotate 2s linear infinite}.rmsc .spinner .path{stroke:var(--rmsc-border);stroke-width:4px;stroke-linecap:round;animation:dash 1.5s ease-in-out infinite}@keyframes rotate{to{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}to{stroke-dasharray:90,150;stroke-dashoffset:-124}}
`);import te from"react";import z,{useEffect as _e,useState as Re}from"react";var He={allItemsAreSelected:"All items are selected.",clearSearch:"Clear Search",clearSelected:"Clear Selected",noOptions:"No options",search:"Search",selectAll:"Select All",selectAllFiltered:"Select All (Filtered)",selectSomeItems:"Select...",create:"Create"},Ue={value:[],hasSelectAll:!0,className:"multi-select",debounceDuration:200,options:[]},ae=z.createContext({}),ie=({props:e,children:r})=>{let[t,o]=Re(e.options),n=s=>{var a;return((a=e.overrideStrings)==null?void 0:a[s])||He[s]};return _e(()=>{o(e.options)},[e.options]),z.createElement(ae.Provider,{value:le(Y(Y({t:n},Ue),e),{options:t,setOptions:o})},r)},E=()=>z.useContext(ae);import S,{useEffect as ke,useRef as tt,useState as Z}from"react";import{useEffect as Be,useRef as Ve}from"react";function ce(e,r){let t=Ve(!1);Be(()=>{t.current?e():t.current=!0},r)}import{useCallback as $e,useEffect as de,useMemo as je,useRef as Ye}from"react";var qe={when:!0,eventTypes:["keydown"]};function M(e,r,t){let o=je(()=>Array.isArray(e)?e:[e],[e]),n=Object.assign({},qe,t),{when:s,eventTypes:a}=n,v=Ye(r),{target:i}=n;de(()=>{v.current=r});let m=$e(c=>{o.some(d=>c.key===d||c.code===d)&&v.current(c)},[o]);de(()=>{if(s&&typeof window<"u"){let c=i?i.current:window;return a.forEach(d=>{c&&c.addEventListener(d,m)}),()=>{a.forEach(d=>{c&&c.removeEventListener(d,m)})}}},[s,a,o,i,r])}var g={ARROW_DOWN:"ArrowDown",ARROW_UP:"ArrowUp",ENTER:"Enter",ESCAPE:"Escape",SPACE:"Space"};import y,{useCallback as Ze,useEffect as be,useMemo as ve,useRef as xe,useState as _}from"react";var pe=(e,r)=>{let t;return function(...o){clearTimeout(t),t=setTimeout(()=>{e.apply(null,o)},r)}};function ue(e,r,t){if(!r)return e;let o=me(r,t);return e.filter(({label:n,value:s})=>n!=null&&s!=null).map(n=>({option:n,score:ze(me(n.label,t),o)})).filter(n=>n.score>=Math.max(o.length-2,o.length)).sort((n,s)=>s.score-n.score).map(n=>n.option)}function ze(e,r){let t=e.length,o=r.length,n=[];if(!t||!o)return 0;if(t<o&&([e,r]=[r,e],[t,o]=[o,t]),e.indexOf(r)!==-1)return o+1/t;for(let s=0;s<=t;++s)n[s]=[0];for(let s=0;s<=o;++s)n[0][s]=0;for(let s=1;s<=t;++s)for(let a=1;a<=o;++a)n[s][a]=e[s-1]===r[a-1]?1+n[s-1][a-1]:Math.max(n[s][a-1],n[s-1][a]);return n[t][o]}function me(e,r){if(!e)return"";if(e=e.toUpperCase().replace(/((?=[^\u00E0-\u00FC])\W)|_/g,""),!r)return e;let t=r;return Object.keys(t).reduce((o,n)=>{let s=new RegExp(n,"g");return o.replace(s,t[n])},e)}import G from"react";var W=()=>G.createElement("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"dropdown-search-clear-icon gray"},G.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),G.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}));import he,{useRef as Je}from"react";import J from"react";var Ge=({checked:e,option:r,onClick:t,disabled:o})=>J.createElement("div",{className:`item-renderer ${o&&"disabled"}`},J.createElement("input",{type:"checkbox",onChange:t,checked:e,tabIndex:-1,disabled:o}),J.createElement("span",null,r.label)),fe=Ge;var Qe=({itemRenderer:e=fe,option:r,checked:t,tabIndex:o,disabled:n,onSelectionChanged:s,onClick:a})=>{let v=Je(),i=d=>{m(),d.preventDefault()},m=()=>{n||s(!t)},c=d=>{m(),a(d)};return M([g.ENTER,g.SPACE],i,{target:v}),he.createElement("label",{className:`select-item ${t&&"selected"}`,role:"option","aria-selected":t,tabIndex:o,ref:v},he.createElement(e,{option:r,checked:t,onClick:c,disabled:n}))},T=Qe;import K from"react";var Xe=({options:e,onClick:r,skipIndex:t})=>{let{disabled:o,value:n,onChange:s,ItemRenderer:a}=E(),v=(i,m)=>{o||s(m?[...n,i]:n.filter(c=>c.value!==i.value))};return K.createElement(K.Fragment,null,e.map((i,m)=>{let c=m+t;return K.createElement("li",{key:(i==null?void 0:i.key)||m},K.createElement(T,{tabIndex:c,option:i,onSelectionChanged:d=>v(i,d),checked:!!n.find(d=>d.value===i.value),onClick:d=>r(d,c),itemRenderer:a,disabled:i.disabled||o}))}))},ge=Xe;var et=()=>{let{t:e,onChange:r,options:t,setOptions:o,value:n,filterOptions:s,ItemRenderer:a,disabled:v,disableSearch:i,hasSelectAll:m,ClearIcon:c,debounceDuration:d,isCreatable:R,onCreateOption:O}=E(),I=xe(),x=xe(),[h,F]=_(""),[C,H]=_(t),[w,L]=_(""),[A,P]=_(0),U=Ze(pe(l=>L(l),d),[]),N=ve(()=>{let l=0;return i||(l+=1),m&&(l+=1),l},[i,m]),B={label:e(h?"selectAllFiltered":"selectAll"),value:""},V=l=>{let p=C.filter(k=>!k.disabled).map(k=>k.value);if(l){let De=[...n.map(j=>j.value),...p];return(s?C:t).filter(j=>De.includes(j.value))}return n.filter(k=>!p.includes(k.value))},$=l=>{let p=V(l);r(p)},b=l=>{U(l.target.value),F(l.target.value),P(0)},D=()=>{var l;L(""),F(""),(l=x==null?void 0:x.current)==null||l.focus()},re=l=>P(l),Ee=l=>{switch(l.code){case g.ARROW_UP:oe(-1);break;case g.ARROW_DOWN:oe(1);break;default:return}l.stopPropagation(),l.preventDefault()};M([g.ARROW_DOWN,g.ARROW_UP],Ee,{target:I});let Ie=()=>{P(0)},Ae=async()=>{let l={label:h,value:h,__isNew__:!0};O&&(l=await O(h)),o([l,...t]),D(),r([...n,l])},Pe=async()=>s?await s(t,w):ue(t,w),oe=l=>{let p=A+l;p=Math.max(0,p),p=Math.min(p,t.length+Math.max(N-1,0)),P(p)};be(()=>{var l,p;(p=(l=I==null?void 0:I.current)==null?void 0:l.querySelector(`[tabIndex='${A}']`))==null||p.focus()},[A]);let[Me,Ne]=ve(()=>{let l=C.filter(p=>!p.disabled);return[l.every(p=>n.findIndex(k=>k.value===p.value)!==-1),l.length!==0]},[C,n]);return be(()=>{Pe().then(H)},[w,t]),y.createElement("div",{className:"select-panel",role:"listbox",ref:I},!i&&y.createElement("div",{className:"search"},y.createElement("input",{placeholder:e("search"),type:"text","aria-describedby":e("search"),onChange:b,onFocus:Ie,value:h,ref:x,tabIndex:0}),y.createElement("button",{type:"button",className:"search-clear-button",hidden:!h,onClick:D,"aria-label":e("clearSearch")},c||y.createElement(W,null))),y.createElement("ul",{className:"options"},m&&Ne&&y.createElement(T,{tabIndex:N===1?0:1,checked:Me,option:B,onSelectionChanged:$,onClick:()=>re(1),itemRenderer:a,disabled:v}),C.length?y.createElement(ge,{skipIndex:N,options:C,onClick:(l,p)=>re(p)}):R?y.createElement("li",{onClick:Ae,className:"select-item creatable"},`${e("create")} "${h}"`):y.createElement("li",{className:"no-options"},e("noOptions"))))},Q=et;import Se from"react";var ye=({expanded:e})=>Se.createElement("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"dropdown-heading-dropdown-arrow gray"},Se.createElement("path",{d:e?"M18 15 12 9 6 15":"M6 9L12 15 18 9"}));import Ce from"react";var we=()=>{let{t:e,value:r,options:t,valueRenderer:o}=E(),n=r.length===0,s=r.length===t.length,a=o&&o(r,t);return n?Ce.createElement("span",{className:"gray"},a||e("selectSomeItems")):Ce.createElement("span",null,a||(s?e("allItemsAreSelected"):(()=>r.map(i=>i.label).join(", "))()))};import X from"react";var Oe=({size:e=24})=>X.createElement("span",{style:{width:e,marginRight:"0.2rem"}},X.createElement("svg",{width:e,height:e,className:"spinner",viewBox:"0 0 50 50",style:{display:"inline",verticalAlign:"middle"}},X.createElement("circle",{cx:"25",cy:"25",r:"20",fill:"none",className:"path"})));var rt=()=>{let{t:e,onMenuToggle:r,ArrowRenderer:t,shouldToggleOnHover:o,isLoading:n,disabled:s,onChange:a,labelledBy:v,value:i,isOpen:m,defaultIsOpen:c,ClearSelectedIcon:d,closeOnChangedValue:R}=E();ke(()=>{R&&h(!1)},[i]);let[O,I]=Z(!0),[x,h]=Z(c),[F,C]=Z(!1),H=t||ye,w=tt();ce(()=>{r&&r(x)},[x]),ke(()=>{c===void 0&&typeof m=="boolean"&&(I(!1),h(m))},[m]);let L=b=>{var D;["text","button"].includes(b.target.type)&&[g.SPACE,g.ENTER].includes(b.code)||(O&&(b.code===g.ESCAPE?(h(!1),(D=w==null?void 0:w.current)==null||D.focus()):h(!0)),b.preventDefault())};M([g.ENTER,g.ARROW_DOWN,g.SPACE,g.ESCAPE],L,{target:w});let A=b=>{O&&o&&h(b)},P=()=>!F&&C(!0),U=b=>{!b.currentTarget.contains(b.relatedTarget)&&O&&(C(!1),h(!1))},N=()=>A(!0),B=()=>A(!1),V=()=>{O&&h(n||s?!1:!x)},$=b=>{b.stopPropagation(),a([]),O&&h(!1)};return S.createElement("div",{tabIndex:0,className:"dropdown-container","aria-labelledby":v,"aria-expanded":x,"aria-readonly":!0,"aria-disabled":s,ref:w,onFocus:P,onBlur:U,onMouseEnter:N,onMouseLeave:B},S.createElement("div",{className:"dropdown-heading",onClick:V},S.createElement("div",{className:"dropdown-heading-value"},S.createElement(we,null)),n&&S.createElement(Oe,null),i.length>0&&S.createElement("button",{type:"button",className:"clear-selected-button",onClick:$,disabled:s,"aria-label":e("clearSelected")},d||S.createElement(W,null)),S.createElement(H,{expanded:x})),x&&S.createElement("div",{className:"dropdown-content"},S.createElement("div",{className:"panel-content"},S.createElement(Q,null))))},ee=rt;var ot=e=>te.createElement(ie,{props:e},te.createElement("div",{className:`rmsc ${e.className||"multi-select"}`},te.createElement(ee,null))),nt=ot;export{ee as Dropdown,nt as MultiSelect,T as SelectItem,Q as SelectPanel};
